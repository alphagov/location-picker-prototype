{% extends "layout.html" %}

{% block page_title %}
  Location picker - public demo
{% endblock %}

{% set global_header_text = 'Prototype' %}

{% block proposition_header %}
  <!-- blank to remove the proposition header -->
{% endblock %}

{% block content %}
<main id="content" role="main">

  <div class="grid-row">
    <div class="column-two-thirds">

      <a class="link-back" href="/">Back</a>

      <h1 class="heading-large">
        What is your country of birth?
      </h1>

      <form class="form" method="POST" action="/country-of-birth" autocomplete="off">

        <div class="form-group">
          <label class="form-label-bold visually-hidden" for="location-select-dropdown">
            What is your country of birth?
          </label>
          <div class="form-control-1-2">
            <select class="form-control" id="location-select-dropdown">
              <option value="" disabled selected>
                Choose a location
              </option>
              {% for location in locations %}
                <option value="{{location}}">{{location}}</option>
              {% endfor %}
            </select>
          </div>
        </div>

        <div class="form-group">
          <input class="button" type="submit" value="Continue">
        </div>

      </form>

    </div>
  </div>



</main>
{% endblock %}

{% block body_end %}
  <link rel="stylesheet" href="https://unpkg.com/accessible-typeahead@0.4.1/dist/styled.min.css">
  <style>
    .typeahead__menu--inline {
      max-height: none;
      overflow-x: visible;
    }
  </style>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','locationPicker');

    locationPicker('create', 'UA-90200549-4', {
      'cookieName': '_gaCookieLocationPickerComponent'
    });
  </script>
  <script type="text/javascript" src="https://unpkg.com/registers-picker-engine@0.0.2"></script>
  <script type="text/javascript" src="https://unpkg.com/accessible-typeahead@0.4.1"></script>
  <script type="text/javascript">
    var dataFilePath = '/public/data/picker-data-4.json'
    AccessibleTypeahead.enhanceSelectElement({
      autoselect: true,
      selectElement: document.getElementById('location-select-dropdown'),
      minLength: 2,
      source: locationPickerSuggestions(dataFilePath),
      onSelect: (val) => {
        locationPicker('send', 'event', 'Picker', 'onSelect', val);
      }
    })
  </script>
{% endblock %}
