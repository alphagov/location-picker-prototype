{% extends "layout.html" %}

{% block page_title %}
  Location Picker Example 8
{% endblock %}

{% block content %}
<main id="content" role="main">

  <form class="form">

    <h1 class="form-title heading-large">Location picker</h1>

    <!-- Location picker -->
    <div class="form-group">
      <label class="form-label-bold" for="location-select-dropdown">
          What was the last country you visited?
      </label>
      <div class="form-control-1-2">
        <select class="form-control" id="location-select-dropdown">
          <option value="" disabled selected>
            Choose a location
          </option>
          {% for location in locations %}
            <option value="{{location}}">{{location}}</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <div class="form-group">
      <input type="submit" class="button" value="Continue">
    </div>
  </form>

</main>
{% endblock %}

{% block body_end %}
  <link rel="stylesheet" href="https://unpkg.com/accessible-typeahead@0.4.1/dist/styled.min.css">
  <style>
    .typeahead__menu--inline {
      max-height: none;
      overflow-x: visible;
    }
  </style>
  <script type="text/javascript" src="https://unpkg.com/registers-picker-engine@0.0.2"></script>
  <script type="text/javascript" src="https://unpkg.com/accessible-typeahead@0.4.1"></script>
  <script type="text/javascript">
    var dataFilePath = '/public/data/picker-data-4.json'
    AccessibleTypeahead.enhanceSelectElement({
      autoselect: true,
      selectElement: document.getElementById('location-select-dropdown'),
      minLength: 2,
      source: locationPickerSuggestions(dataFilePath)
    })
  </script>
{% endblock %}
